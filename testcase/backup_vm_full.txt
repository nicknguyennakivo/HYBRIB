@testcase backup_vm_full
@max_wait 30
@poll_interval 2



@run
Type "admin" on the username input.
Type "admin" on password input.
Expect "Log In" to be visible.
Click the "Log In" button.
Expect "Data Protection" to be visible.

Open the Data Protection menu.
Click create a new job.
Expect "Backup for VMware" to be visible.
Select "Backup for VMware" as the job type.
Expect "Source" to be visible.

Type "chuong_nguyen_ubuntu_small_2G_for_testing" on the source search input.
Press Enter.
Select the checkbox labeled "chuong_nguyen_ubuntu_small_2G_for_testing".
Expect "chuong_nguyen_ubuntu_small_2G_for_testing" to be visible in the right panel.
Click Next.
Expect "Destination" to be visible.

Click the destination repository dropdown.
Select "365_Backup".
Click Next.
Expect "Schedule" to be visible.

Ensure "Do not schedule, run on demand" is selected.
Click Next.
Expect "Options" to be visible.

Type "test_vm" on the Job Name field.
Click the "Finish & Run" button.
Expect "Run this job?" to be visible.

Click the "Run" button.
Wait until the job status in Job Info is not "Running".
Expect the job status to be "Completed".

Click the Settings menu.
Click the Repositories section.
Select "365_Backup".
Expect "chuong_nguyen_ubuntu_small_2G_for_testing"  to be visible in the backup list.
